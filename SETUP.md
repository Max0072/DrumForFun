# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—è–≤–æ–∫
2. **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ Nodemailer
3. **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞—è–≤–æ–∫** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
4. **API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏**

## üìã –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—É–∂–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
```bash
npm install nodemailer sqlite3 @types/nodemailer
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ email

#### –í–∞—Ä–∏–∞–Ω—Ç A: Gmail (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

1. –í–∫–ª—é—á–∏—Ç–µ –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω—É—é –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ Gmail
2. –°–æ–∑–¥–∞–π—Ç–µ "–ü–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è":
   - Google Account ‚Üí Security ‚Üí App passwords
   - –í—ã–±–µ—Ä–∏—Ç–µ "Mail" –∏ "Other" (–≤–≤–µ–¥–∏—Ç–µ "Drum School")
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env.production`:
```env
EMAIL_USER=your-gmail@gmail.com
EMAIL_PASS=your-app-password-from-step-2
EMAIL_FROM=noreply@drumschool.com
ADMIN_EMAIL=your-admin@gmail.com
NEXT_PUBLIC_BASE_URL=http://localhost:3000
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –î—Ä—É–≥–æ–π SMTP –ø—Ä–æ–≤–∞–π–¥–µ—Ä

–û–±–Ω–æ–≤–∏—Ç–µ `lib/email.ts` –¥–ª—è production:
```env
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-username
SMTP_PASS=your-password
```

### 3. –ó–∞–ø—É—Å–∫

```bash
npm run dev
```

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### 1. –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–∞–µ—Ç –∑–∞—è–≤–∫—É
- –ó–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/booking`
- –í—ã–±–∏—Ä–∞–µ—Ç —Ç–∏–ø: Individual, Band, –∏–ª–∏ Party
- –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

### 2. –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞—è–≤–∫—É
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `A1B2C3D4`)
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±–∞–∑—É `bookings.db`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å —Å—Å—ã–ª–∫–æ–π –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è email –∫–ª–∏–µ–Ω—Ç—É –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∑–∞—è–≤–∫–∏

### 3. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç
- –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ email: `/admin/booking/{ID}/confirm`
- –í–∏–¥–∏—Ç –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏
- –ú–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- –ù–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" –∏–ª–∏ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å"

### 4. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- Email —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
lib/
‚îú‚îÄ‚îÄ email.ts          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —à–∞–±–ª–æ–Ω—ã email
‚îî‚îÄ‚îÄ database.ts       # –†–∞–±–æ—Ç–∞ —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

app/api/booking/
‚îú‚îÄ‚îÄ route.ts          # POST /api/booking - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏
‚îú‚îÄ‚îÄ [id]/route.ts     # GET /api/booking/{id} - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏
‚îî‚îÄ‚îÄ confirm/route.ts  # POST /api/booking/confirm - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

app/admin/
‚îú‚îÄ‚îÄ page.tsx                        # –ì–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
‚îî‚îÄ‚îÄ booking/[id]/confirm/page.tsx   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```

## üé® –®–∞–±–ª–æ–Ω—ã email

–í `lib/email.ts` –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã:
- `adminNotification` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- `clientConfirmation` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
- `bookingConfirmed` - –∑–∞—è–≤–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞
- `bookingRejected` - –∑–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª—è —Ñ–æ—Ä–º—ã
1. –û–±–Ω–æ–≤–∏—Ç–µ `BookingFormData` –≤ `app/booking/page.tsx`
2. –û–±–Ω–æ–≤–∏—Ç–µ `BookingData` –≤ `lib/database.ts`
3. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü—É –ë–î

### –ò–∑–º–µ–Ω–∏—Ç—å email —à–∞–±–ª–æ–Ω—ã
–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `lib/email.ts`

### –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
–û–±–Ω–æ–≤–∏—Ç–µ `validateField` –≤ `app/booking/page.tsx`

## üöÄ Production

1. –ó–∞–º–µ–Ω–∏—Ç–µ SQLite –Ω–∞ PostgreSQL:
```bash
npm install pg @types/pg
```

2. –û–±–Ω–æ–≤–∏—Ç–µ `lib/database.ts` –¥–ª—è PostgreSQL

3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π email —Å–µ—Ä–≤–∏—Å:
   - SMTP (Gmail, Yandex, Mail.ru)
   - Amazon SES
   - Mailgun

4. –î–æ–±–∞–≤—å—Ç–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å email –æ—Ç–ø—Ä–∞–≤–∫—É
1. –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏: `üìß Email sent: {messageId}`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env.local`
3. –î–ª—è Gmail –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
–ë–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ `bookings.db`
```bash
sqlite3 bookings.db
.tables
SELECT * FROM bookings;
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∞ `/booking`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ª–æ–≥–æ–≤
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ email (–º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –≤ —Å–ø–∞–º)
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è